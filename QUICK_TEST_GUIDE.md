# Quick Phase 3 Testing Guide

**Status:** ‚úÖ Backend reloaded with fixes, ready for testing!

**Test URL:** http://localhost:5175/

---

## Critical Test: Verify Specialized Agents Work (5 minutes)

This is the most important test to confirm Phase 3 is working correctly.

### Steps:

1. **Navigate to Generation Plan**
   - Click "Plan" tab in the navigation

2. **Select Documents**
   - Find and click "Add" on these 3 documents:
     - Section L - Instructions to Offerors
     - Section M - Evaluation Factors
     - Section H - Special Contract Requirements

3. **Observe Phase Analysis** (Test Suite 1)
   - Blue PhaseInfo card should appear at top
   - Should show "üéØ Solicitation Phase"
   - Should show completeness percentage (around 23%)
   - Should list missing required documents

4. **Lock and Generate**
   - Click "Lock Generation Plan" button
   - Click "Generate Documents (3)" button
   - Progress screen should appear

5. **Check Live Editor** (Test Suite 2)
   - Wait for generation to complete (~6-15 seconds for 3 docs)
   - Should automatically navigate to Editor tab
   - **CRITICAL CHECK:** Look at the section list on the left
   - Each section should have an icon next to its name:
     - ‚ú® Blue sparkles = Specialized agent (GOOD!)
     - ü§ñ Gray bot = Generic Claude (BAD for these sections)

6. **Verify Agent Coverage**
   - Look at the header (top right area)
   - Should see card showing: "‚ú® Agent Coverage: 3/3 specialized (100%)"
   - If it says "0/3 specialized" or similar, agents are still broken

7. **Test Tooltip**
   - Hover mouse over the ‚ú® icon next to "Section L"
   - Tooltip should appear saying:
     - "Generated by Section L Generator Agent"
     - "Type: Specialized Agent"

---

## Expected Results

### ‚úÖ SUCCESS Indicators:
- PhaseInfo card appears when selecting documents
- All 3 sections show ‚ú® sparkles icon
- Agent coverage shows "3/3 specialized (100%)"
- Tooltips show agent names
- Backend logs show NO errors like "Agent has no generate method"

### ‚ùå FAILURE Indicators:
- Sections show ü§ñ bot icon instead of ‚ú®
- Agent coverage shows "0/3 specialized (0%)"
- Backend logs still show "Agent has no generate method" errors
- Generation takes very long or fails with API overload

---

## If Test PASSES ‚úÖ

Phase 3 is fully functional! Continue with these optional tests:

### Optional Test 1: Phase Analysis (5 minutes)

1. **Test Mixed Phases**
   - Go back to Generation Plan
   - Select "Market Research Report" (pre-solicitation)
   - Keep "Section L" selected (solicitation)
   - Should see ‚ö†Ô∏è warning about mixed phases

2. **Test Completeness**
   - Try selecting all required documents for one phase
   - Completeness should reach 100%
   - Success message should appear

### Optional Test 2: Error Handling (2 minutes)

1. **Test Selection Changes**
   - Rapidly click Add/Remove on multiple documents
   - PhaseInfo should update smoothly without flickering
   - No console errors should appear (press F12 to check)

### Optional Test 3: Multiple Generations (3 minutes)

1. **Test Metadata Updates**
   - Generate different documents
   - Go to Editor
   - Badges should reflect NEW generation, not old

---

## If Test FAILS ‚ùå

Check backend logs for errors:

```bash
# In terminal running backend, look for:
Error with specialized agent SectionLGeneratorAgent: Agent SectionLGeneratorAgent has no generate method
```

**If you see this error:**
- The backend reload didn't work properly
- Try manually restarting the backend:
  1. Press Ctrl+C in backend terminal
  2. Run: `uvicorn backend.main:app --reload --port 8000`
  3. Wait for "Application startup complete"
  4. Try the test again

---

## Backend Verification

To verify the fix is loaded, check backend logs when generating:

**GOOD (Working):**
```
‚úì Section L Generator Agent initialized
INFO: Generating Section L - Instructions to Offerors
[No error about "no generate method"]
```

**BAD (Still Broken):**
```
‚úì Section L Generator Agent initialized
Error with specialized agent SectionLGeneratorAgent: Agent SectionLGeneratorAgent has no generate method
```

---

## Quick Reference: What Each Component Does

### PhaseInfo Component (Top of Generation Plan)
- Shows which procurement phase documents belong to
- Displays completeness percentage with progress bar
- Lists missing required/recommended documents
- Warns if mixing documents from different phases

### AgentBadge Component (Live Editor Sidebar)
- ‚ú® Blue sparkles = Specialized agent generated this
- ü§ñ Gray bot = Generic Claude generated this
- Hover for tooltip showing agent name

### AgentStats Component (Live Editor Header)
- Shows overall agent coverage
- Example: "3/4 specialized (75%)" means 3 out of 4 sections used specialized agents

---

## Time Estimates

- **Critical Test (Specialized Agents):** 5 minutes
- **Optional Tests (Phase Analysis):** 5 minutes
- **Optional Tests (Error Handling):** 2 minutes
- **Optional Tests (Multiple Generations):** 3 minutes
- **Total:** 15 minutes for comprehensive testing

---

## Troubleshooting

### Issue: "No documents listed in Generation Plan"
**Solution:** Click "Uploads" tab first, wait for page to load, then go to "Plan"

### Issue: "Cannot select documents"
**Solution:** Make sure Generation Plan is unlocked (if locked, click "Edit Generation Plan")

### Issue: "API Overloaded error"
**Solution:** You selected too many documents (24+). Try with only 2-3 documents first.

### Issue: "Progress bar stuck at 0%"
**Solution:** Generation might be completing too fast. Wait 5 seconds, it should jump to 100% and redirect to Editor.

### Issue: "No agent badges in Editor"
**Solution:**
1. Check that you generated documents (not just opened old editor)
2. Look for agentMetadata in browser console (F12)
3. Verify backend logs show successful agent generation

---

## Success Criteria for Phase 3

Phase 3 is considered COMPLETE when:

1. ‚úÖ PhaseInfo appears and updates correctly
2. ‚úÖ Agent badges show ‚ú® for specialized agents
3. ‚úÖ Agent coverage shows correct percentages
4. ‚úÖ Tooltips display agent names
5. ‚úÖ No console errors
6. ‚úÖ Backend shows no "no generate method" errors

Once all 6 criteria pass, Phase 3 is production-ready!

---

**Current Status:** Backend reloaded, ready for testing!

**Next Step:** Run the Critical Test (5 minutes) at http://localhost:5175/
